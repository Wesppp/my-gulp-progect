
function animateCSS(element, animation, prefix = 'animate__') {
    new Promise((resolve, reject) => {
        const animationName = `${prefix}${animation}`;
    
        element.classList.add(`${prefix}animated`, animationName);
    
        // When the animation ends, we clean the classes and resolve the Promise
        function handleAnimationEnd(event) {
          event.stopPropagation();
          element.classList.remove(`${prefix}animated`, animationName);
          resolve('Animation ended');
        }
    
        element.addEventListener('animationend', handleAnimationEnd);
      });
}
const apikey = '7a76636d057686c8169551ef723fca1e';

const generateBtn = document.getElementById('generate');

generateBtn.addEventListener('click', () => {
    animateCSS(generateBtn, 'bounceIn');
    generatePassword();
})

const pwEl = document.getElementById('pw')
const copyEl = document.getElementById('copy')
const lengthEl = document.getElementById('length')
const lowerEl = document.getElementById('lower')
const numberEl = document.getElementById('number')
const symbolEl = document.getElementById('symbol')
const upperEl = document.getElementById('upper')

const lowerLetters = 'abcdefghijklmnopqrstuvwxyz'
const upperLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
const numbers = '0123456789'
const symbols = '!@#$%^&*()_+='

function getLowercase() {
    return lowerLetters[Math.floor(Math.random() * lowerLetters.length)];
}

function getUppercase() {
    return upperLetters[Math.floor(Math.random() * upperLetters.length)];
}

function getNumber() {
    return numbers[Math.floor(Math.random() * numbers.length)];
}

function getSymbol() {
    return symbols[Math.floor(Math.random() * symbols.length)];
}

function generatePassword() {
    const len = lengthEl.value;
    let password = '';

    for (let i = 0; i < len; i++) {
        const x = generateX();

        if (x) {
            password += x;
        } else {
            warningMessage('pw');
        }
    }

    pwEl.innerHTML = `
    <button id="copy">Copy</button>
    ${password}
    `
}

function generateX() {
    const xs = [];

    if (upperEl.checked) {
        xs.push(getUppercase());
    }

    if (lowerEl.checked) {
        xs.push(getLowercase());
    }

    if (numberEl.checked) {
        xs.push(getNumber());
    }

    if (symbolEl.checked) {
        xs.push(getSymbol());
    }

    return xs[Math.floor(Math.random() * xs.length)]
}

copyEl.addEventListener('click', function() {
    const textarea = document.createElement('textarea')
    const password = pwEl.innerText;

    if (!password) return;

    textarea.value = password;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand("copy");
    textarea.remove();
})
const quizData = [
    {
        question: 'The well - known code from the Matrix actually denotes..',
        a: "director's name",
        b: 'year of release',
        c: 'sushi recipe',
        d: 'nothing',
        correct: 'c'
    },
    {
        question: 'Name the country with the highest life expectancy',
        a: 'China',
        b: 'Russia',
        c: 'Japan',
        d: 'USA',
        correct: 'a'
    },
    {
        question: 'At what age does longevity begin?',
        a: '60',
        b: '90',
        c: '70',
        d: '80',
        correct: 'b'
    },
    {
        question: 'How many kilometers in one mile?',
        a: '1.5 km',
        b: '1.6 km',
        c: '1.4 km',
        d: '1.7 km',
        correct: 'b'
    },
    {
        question: "How long did the Hundred Years' War last?",
        a: '100 years',
        b: '110 years',
        c: '117 years',
        d: '116 years',
        correct: 'd'
    }
]

const quiz = document.getElementById('quiz')
const answerEls = document.querySelectorAll('.answer');
const questionEl = document.getElementById('question')
const a_text = document.getElementById('a_text')
const b_text = document.getElementById('b_text')
const c_text = document.getElementById('c_text')
const d_text = document.getElementById('d_text')
const submitBtn = document.querySelector('.submit')

let currentQuiz = 0;
let score = 0;

loadQuiz()

function loadQuiz() {
    deselectAnswers()
    const currentQuizData = quizData[currentQuiz];
    questionEl.innerHTML = currentQuizData.question;

    a_text.innerHTML = currentQuizData.a;
    b_text.innerHTML = currentQuizData.b;
    c_text.innerHTML = currentQuizData.c;
    d_text.innerHTML = currentQuizData.d;
}

function getSelected() {

    let answer = undefined;

    answerEls.forEach( (answerEl) => {
        if (answerEl.checked) {
            answer = answerEl.id;
        }
    })

    return answer;
}

function deselectAnswers() {
    answerEls.forEach( (answerEl) => {
        answerEl.checked = false;
    })
}

submitBtn.addEventListener('click', () => {
    const answer = getSelected();

    if (answer) {
        if (answer === quizData[currentQuiz].correct) {
            score++;
        }
        currentQuiz++;

        if (currentQuiz < quizData.length) {
            loadQuiz();
        } else {
            quiz.innerHTML = `<h2>
            Your result -> ${score}/${quizData.length}
            </h2>
            <button onclick="location.reload()">Reload</button>`
        }
    }
})
let year = (new Date()).getFullYear();
let birthday = `12 March ${year}`

const daysEl = document.getElementById('days')
const hoursEl = document.getElementById('hours')
const minutesEl = document.getElementById('minutes')
const secondsEl = document.getElementById('seconds')

function countdown() {
    const birthdayDate = new Date(birthday);
    const currentDate = new Date();

    if (birthdayDate - currentDate > 0) {
        const totalSeconds = (birthdayDate - currentDate) / 1000

        const days = Math.floor(totalSeconds / 3600 / 24)
        const hours = Math.floor(totalSeconds / 3600) % 24
        const minutes = Math.floor(totalSeconds / 60) % 60
        const seconds = Math.floor(totalSeconds) % 60
    
        daysEl.innerHTML = days
        hoursEl.innerHTML = hours
        minutesEl.innerHTML = minutes
        secondsEl.innerHTML = seconds
    } else {
        birthday = `10 Jan ${year++}`
    }
}

countdown()

setInterval(countdown , 1000);


const form  = document.getElementById('todos-form')
const input = document.querySelector('.todos-input')
const todos = document.getElementById('todos')

form.addEventListener('submit', (event) => {
    event.preventDefault();

    const todo = input.value;

    if (todo) {
        addToDo(todo);

        updateLS();
    } else {
        warningMessage('todo');
    }
})

function addToDo(todo) {
    const todoEl = document.createElement('li');
    todoEl.innerText = todo;
    todos.appendChild(todoEl);
    todoEl.classList.add("animate__animated", "animate__zoomIn", "todos-el");

    todoEl.addEventListener('click', () => {
        todoEl.classList.toggle('completed');
    })

    todoEl.addEventListener('contextmenu', (e) => {
        e.preventDefault();

        todoEl.remove();
        updateLS();
    })

    input.value = '';
}

function updateLS() {
    const todosEls = document.querySelectorAll('.todos-el');

    const todos = []

    todosEls.forEach( (el) => {
        todos.push({
            text: el.innerText,
        })
    })

    localStorage.setItem('todos', JSON.stringify(todos))
}

function loadingTodos() {
    const savedTodos = JSON.parse(localStorage.getItem('todos'));

    savedTodos.forEach( (td) => {
        addToDo(td['text'])
    })   
}

loadingTodos();

function warningMessage(name) {
    var toastLiveExample = document.querySelector(`.${name}-toast`)

    var toast = new bootstrap.Toast(toastLiveExample)
    toast.show()
}
const weatherForm = document.querySelector('.wether-form');
const search = document.getElementById('search');
const weatherInfo = document.querySelector('.wether-info');

const url = (city) => `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apikey}`

async function getWeatherByLocation(city) {
    const response = await fetch(url(city));
    const responseData = await response.json();

    addWeather(responseData);
}


function addWeather(data) {
    const temp = KtoC(data.main.temp);

    const weather = document.createElement('div')
    weather.classList.add('weather')

    weather.innerHTML = `
    <h2>${temp}Â°C</h2>
    <p>
    wind speed - ${data.wind.speed}m/s <br>
    humidity - ${data.main.humidity}% <br>
    pressure - ${data.main.pressure * 0.75}mmHg
    </p>
    <img src="https://openweathermap.org/img/w/${data.weather[0].icon}.png">
    `

    weatherInfo.innerHTML = "";
    weatherInfo.style.opacity = '1';
    animateCSS(weatherInfo, 'flipInY')
    weatherInfo.appendChild(weather);
}

function KtoC(K) {
    return Math.floor(K - 273.15);
}

weatherForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const city = search.value;

    if (city) {
        getWeatherByLocation(city);
    } else {
        warningMessage('weather');
    }
})
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImFwaWtleS5qcyIsImxvY2FsU3RvcmFnZS5qcyIsInBhc3N3b3JkLWdlbmVyYXRvci5qcyIsInF1aXouanMiLCJ0aW1lci5qcyIsIlRvRG8uanMiLCJ3YXJuaW5nLW1lc3NhZ2UuanMiLCJ3ZWF0aGVyLWFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEJBO0FDQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiBhbmltYXRlQ1NTKGVsZW1lbnQsIGFuaW1hdGlvbiwgcHJlZml4ID0gJ2FuaW1hdGVfXycpIHtcclxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCBhbmltYXRpb25OYW1lID0gYCR7cHJlZml4fSR7YW5pbWF0aW9ufWA7XHJcbiAgICBcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYCR7cHJlZml4fWFuaW1hdGVkYCwgYW5pbWF0aW9uTmFtZSk7XHJcbiAgICBcclxuICAgICAgICAvLyBXaGVuIHRoZSBhbmltYXRpb24gZW5kcywgd2UgY2xlYW4gdGhlIGNsYXNzZXMgYW5kIHJlc29sdmUgdGhlIFByb21pc2VcclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVBbmltYXRpb25FbmQoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGAke3ByZWZpeH1hbmltYXRlZGAsIGFuaW1hdGlvbk5hbWUpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgnQW5pbWF0aW9uIGVuZGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBoYW5kbGVBbmltYXRpb25FbmQpO1xyXG4gICAgICB9KTtcclxufSIsImNvbnN0IGFwaWtleSA9ICc3YTc2NjM2ZDA1NzY4NmM4MTY5NTUxZWY3MjNmY2ExZSc7IiwiIiwiY29uc3QgZ2VuZXJhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VuZXJhdGUnKTtcclxuXHJcbmdlbmVyYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgYW5pbWF0ZUNTUyhnZW5lcmF0ZUJ0biwgJ2JvdW5jZUluJyk7XHJcbiAgICBnZW5lcmF0ZVBhc3N3b3JkKCk7XHJcbn0pXHJcblxyXG5jb25zdCBwd0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B3JylcclxuY29uc3QgY29weUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHknKVxyXG5jb25zdCBsZW5ndGhFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZW5ndGgnKVxyXG5jb25zdCBsb3dlckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvd2VyJylcclxuY29uc3QgbnVtYmVyRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnVtYmVyJylcclxuY29uc3Qgc3ltYm9sRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ltYm9sJylcclxuY29uc3QgdXBwZXJFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cHBlcicpXHJcblxyXG5jb25zdCBsb3dlckxldHRlcnMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonXHJcbmNvbnN0IHVwcGVyTGV0dGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWidcclxuY29uc3QgbnVtYmVycyA9ICcwMTIzNDU2Nzg5J1xyXG5jb25zdCBzeW1ib2xzID0gJyFAIyQlXiYqKClfKz0nXHJcblxyXG5mdW5jdGlvbiBnZXRMb3dlcmNhc2UoKSB7XHJcbiAgICByZXR1cm4gbG93ZXJMZXR0ZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxvd2VyTGV0dGVycy5sZW5ndGgpXTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VXBwZXJjYXNlKCkge1xyXG4gICAgcmV0dXJuIHVwcGVyTGV0dGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB1cHBlckxldHRlcnMubGVuZ3RoKV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE51bWJlcigpIHtcclxuICAgIHJldHVybiBudW1iZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bWJlcnMubGVuZ3RoKV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN5bWJvbCgpIHtcclxuICAgIHJldHVybiBzeW1ib2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHN5bWJvbHMubGVuZ3RoKV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmQoKSB7XHJcbiAgICBjb25zdCBsZW4gPSBsZW5ndGhFbC52YWx1ZTtcclxuICAgIGxldCBwYXNzd29yZCA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjb25zdCB4ID0gZ2VuZXJhdGVYKCk7XHJcblxyXG4gICAgICAgIGlmICh4KSB7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkICs9IHg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2FybmluZ01lc3NhZ2UoJ3B3Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB3RWwuaW5uZXJIVE1MID0gYFxyXG4gICAgPGJ1dHRvbiBpZD1cImNvcHlcIj5Db3B5PC9idXR0b24+XHJcbiAgICAke3Bhc3N3b3JkfVxyXG4gICAgYFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVgoKSB7XHJcbiAgICBjb25zdCB4cyA9IFtdO1xyXG5cclxuICAgIGlmICh1cHBlckVsLmNoZWNrZWQpIHtcclxuICAgICAgICB4cy5wdXNoKGdldFVwcGVyY2FzZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobG93ZXJFbC5jaGVja2VkKSB7XHJcbiAgICAgICAgeHMucHVzaChnZXRMb3dlcmNhc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG51bWJlckVsLmNoZWNrZWQpIHtcclxuICAgICAgICB4cy5wdXNoKGdldE51bWJlcigpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3ltYm9sRWwuY2hlY2tlZCkge1xyXG4gICAgICAgIHhzLnB1c2goZ2V0U3ltYm9sKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB4c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB4cy5sZW5ndGgpXVxyXG59XHJcblxyXG5jb3B5RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxyXG4gICAgY29uc3QgcGFzc3dvcmQgPSBwd0VsLmlubmVyVGV4dDtcclxuXHJcbiAgICBpZiAoIXBhc3N3b3JkKSByZXR1cm47XHJcblxyXG4gICAgdGV4dGFyZWEudmFsdWUgPSBwYXNzd29yZDtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xyXG4gICAgdGV4dGFyZWEuc2VsZWN0KCk7XHJcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XHJcbiAgICB0ZXh0YXJlYS5yZW1vdmUoKTtcclxufSkiLCJjb25zdCBxdWl6RGF0YSA9IFtcclxuICAgIHtcclxuICAgICAgICBxdWVzdGlvbjogJ1RoZSB3ZWxsIC0ga25vd24gY29kZSBmcm9tIHRoZSBNYXRyaXggYWN0dWFsbHkgZGVub3Rlcy4uJyxcclxuICAgICAgICBhOiBcImRpcmVjdG9yJ3MgbmFtZVwiLFxyXG4gICAgICAgIGI6ICd5ZWFyIG9mIHJlbGVhc2UnLFxyXG4gICAgICAgIGM6ICdzdXNoaSByZWNpcGUnLFxyXG4gICAgICAgIGQ6ICdub3RoaW5nJyxcclxuICAgICAgICBjb3JyZWN0OiAnYydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgcXVlc3Rpb246ICdOYW1lIHRoZSBjb3VudHJ5IHdpdGggdGhlIGhpZ2hlc3QgbGlmZSBleHBlY3RhbmN5JyxcclxuICAgICAgICBhOiAnQ2hpbmEnLFxyXG4gICAgICAgIGI6ICdSdXNzaWEnLFxyXG4gICAgICAgIGM6ICdKYXBhbicsXHJcbiAgICAgICAgZDogJ1VTQScsXHJcbiAgICAgICAgY29ycmVjdDogJ2EnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHF1ZXN0aW9uOiAnQXQgd2hhdCBhZ2UgZG9lcyBsb25nZXZpdHkgYmVnaW4/JyxcclxuICAgICAgICBhOiAnNjAnLFxyXG4gICAgICAgIGI6ICc5MCcsXHJcbiAgICAgICAgYzogJzcwJyxcclxuICAgICAgICBkOiAnODAnLFxyXG4gICAgICAgIGNvcnJlY3Q6ICdiJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBxdWVzdGlvbjogJ0hvdyBtYW55IGtpbG9tZXRlcnMgaW4gb25lIG1pbGU/JyxcclxuICAgICAgICBhOiAnMS41IGttJyxcclxuICAgICAgICBiOiAnMS42IGttJyxcclxuICAgICAgICBjOiAnMS40IGttJyxcclxuICAgICAgICBkOiAnMS43IGttJyxcclxuICAgICAgICBjb3JyZWN0OiAnYidcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgcXVlc3Rpb246IFwiSG93IGxvbmcgZGlkIHRoZSBIdW5kcmVkIFllYXJzJyBXYXIgbGFzdD9cIixcclxuICAgICAgICBhOiAnMTAwIHllYXJzJyxcclxuICAgICAgICBiOiAnMTEwIHllYXJzJyxcclxuICAgICAgICBjOiAnMTE3IHllYXJzJyxcclxuICAgICAgICBkOiAnMTE2IHllYXJzJyxcclxuICAgICAgICBjb3JyZWN0OiAnZCdcclxuICAgIH1cclxuXVxyXG5cclxuY29uc3QgcXVpeiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWl6JylcclxuY29uc3QgYW5zd2VyRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuc3dlcicpO1xyXG5jb25zdCBxdWVzdGlvbkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uJylcclxuY29uc3QgYV90ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FfdGV4dCcpXHJcbmNvbnN0IGJfdGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiX3RleHQnKVxyXG5jb25zdCBjX3RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY190ZXh0JylcclxuY29uc3QgZF90ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RfdGV4dCcpXHJcbmNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQnKVxyXG5cclxubGV0IGN1cnJlbnRRdWl6ID0gMDtcclxubGV0IHNjb3JlID0gMDtcclxuXHJcbmxvYWRRdWl6KClcclxuXHJcbmZ1bmN0aW9uIGxvYWRRdWl6KCkge1xyXG4gICAgZGVzZWxlY3RBbnN3ZXJzKClcclxuICAgIGNvbnN0IGN1cnJlbnRRdWl6RGF0YSA9IHF1aXpEYXRhW2N1cnJlbnRRdWl6XTtcclxuICAgIHF1ZXN0aW9uRWwuaW5uZXJIVE1MID0gY3VycmVudFF1aXpEYXRhLnF1ZXN0aW9uO1xyXG5cclxuICAgIGFfdGV4dC5pbm5lckhUTUwgPSBjdXJyZW50UXVpekRhdGEuYTtcclxuICAgIGJfdGV4dC5pbm5lckhUTUwgPSBjdXJyZW50UXVpekRhdGEuYjtcclxuICAgIGNfdGV4dC5pbm5lckhUTUwgPSBjdXJyZW50UXVpekRhdGEuYztcclxuICAgIGRfdGV4dC5pbm5lckhUTUwgPSBjdXJyZW50UXVpekRhdGEuZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWQoKSB7XHJcblxyXG4gICAgbGV0IGFuc3dlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBhbnN3ZXJFbHMuZm9yRWFjaCggKGFuc3dlckVsKSA9PiB7XHJcbiAgICAgICAgaWYgKGFuc3dlckVsLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgYW5zd2VyID0gYW5zd2VyRWwuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gYW5zd2VyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZXNlbGVjdEFuc3dlcnMoKSB7XHJcbiAgICBhbnN3ZXJFbHMuZm9yRWFjaCggKGFuc3dlckVsKSA9PiB7XHJcbiAgICAgICAgYW5zd2VyRWwuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgfSlcclxufVxyXG5cclxuc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3QgYW5zd2VyID0gZ2V0U2VsZWN0ZWQoKTtcclxuXHJcbiAgICBpZiAoYW5zd2VyKSB7XHJcbiAgICAgICAgaWYgKGFuc3dlciA9PT0gcXVpekRhdGFbY3VycmVudFF1aXpdLmNvcnJlY3QpIHtcclxuICAgICAgICAgICAgc2NvcmUrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgY3VycmVudFF1aXorKztcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRRdWl6IDwgcXVpekRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWRRdWl6KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcXVpei5pbm5lckhUTUwgPSBgPGgyPlxyXG4gICAgICAgICAgICBZb3VyIHJlc3VsdCAtPiAke3Njb3JlfS8ke3F1aXpEYXRhLmxlbmd0aH1cclxuICAgICAgICAgICAgPC9oMj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwibG9jYXRpb24ucmVsb2FkKClcIj5SZWxvYWQ8L2J1dHRvbj5gXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSIsImxldCB5ZWFyID0gKG5ldyBEYXRlKCkpLmdldEZ1bGxZZWFyKCk7XHJcbmxldCBiaXJ0aGRheSA9IGAxMiBNYXJjaCAke3llYXJ9YFxyXG5cclxuY29uc3QgZGF5c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RheXMnKVxyXG5jb25zdCBob3Vyc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvdXJzJylcclxuY29uc3QgbWludXRlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbnV0ZXMnKVxyXG5jb25zdCBzZWNvbmRzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vjb25kcycpXHJcblxyXG5mdW5jdGlvbiBjb3VudGRvd24oKSB7XHJcbiAgICBjb25zdCBiaXJ0aGRheURhdGUgPSBuZXcgRGF0ZShiaXJ0aGRheSk7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgaWYgKGJpcnRoZGF5RGF0ZSAtIGN1cnJlbnREYXRlID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHRvdGFsU2Vjb25kcyA9IChiaXJ0aGRheURhdGUgLSBjdXJyZW50RGF0ZSkgLyAxMDAwXHJcblxyXG4gICAgICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDM2MDAgLyAyNClcclxuICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gMzYwMCkgJSAyNFxyXG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKSAlIDYwXHJcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzKSAlIDYwXHJcbiAgICBcclxuICAgICAgICBkYXlzRWwuaW5uZXJIVE1MID0gZGF5c1xyXG4gICAgICAgIGhvdXJzRWwuaW5uZXJIVE1MID0gaG91cnNcclxuICAgICAgICBtaW51dGVzRWwuaW5uZXJIVE1MID0gbWludXRlc1xyXG4gICAgICAgIHNlY29uZHNFbC5pbm5lckhUTUwgPSBzZWNvbmRzXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJpcnRoZGF5ID0gYDEwIEphbiAke3llYXIrK31gXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvdW50ZG93bigpXHJcblxyXG5zZXRJbnRlcnZhbChjb3VudGRvd24gLCAxMDAwKTtcclxuXHJcbiIsImNvbnN0IGZvcm0gID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9zLWZvcm0nKVxyXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2Rvcy1pbnB1dCcpXHJcbmNvbnN0IHRvZG9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9zJylcclxuXHJcbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGNvbnN0IHRvZG8gPSBpbnB1dC52YWx1ZTtcclxuXHJcbiAgICBpZiAodG9kbykge1xyXG4gICAgICAgIGFkZFRvRG8odG9kbyk7XHJcblxyXG4gICAgICAgIHVwZGF0ZUxTKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdhcm5pbmdNZXNzYWdlKCd0b2RvJyk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBhZGRUb0RvKHRvZG8pIHtcclxuICAgIGNvbnN0IHRvZG9FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICB0b2RvRWwuaW5uZXJUZXh0ID0gdG9kbztcclxuICAgIHRvZG9zLmFwcGVuZENoaWxkKHRvZG9FbCk7XHJcbiAgICB0b2RvRWwuY2xhc3NMaXN0LmFkZChcImFuaW1hdGVfX2FuaW1hdGVkXCIsIFwiYW5pbWF0ZV9fem9vbUluXCIsIFwidG9kb3MtZWxcIik7XHJcblxyXG4gICAgdG9kb0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHRvZG9FbC5jbGFzc0xpc3QudG9nZ2xlKCdjb21wbGV0ZWQnKTtcclxuICAgIH0pXHJcblxyXG4gICAgdG9kb0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHRvZG9FbC5yZW1vdmUoKTtcclxuICAgICAgICB1cGRhdGVMUygpO1xyXG4gICAgfSlcclxuXHJcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVMUygpIHtcclxuICAgIGNvbnN0IHRvZG9zRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG9zLWVsJyk7XHJcblxyXG4gICAgY29uc3QgdG9kb3MgPSBbXVxyXG5cclxuICAgIHRvZG9zRWxzLmZvckVhY2goIChlbCkgPT4ge1xyXG4gICAgICAgIHRvZG9zLnB1c2goe1xyXG4gICAgICAgICAgICB0ZXh0OiBlbC5pbm5lclRleHQsXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkodG9kb3MpKVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkaW5nVG9kb3MoKSB7XHJcbiAgICBjb25zdCBzYXZlZFRvZG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9kb3MnKSk7XHJcblxyXG4gICAgc2F2ZWRUb2Rvcy5mb3JFYWNoKCAodGQpID0+IHtcclxuICAgICAgICBhZGRUb0RvKHRkWyd0ZXh0J10pXHJcbiAgICB9KSAgIFxyXG59XHJcblxyXG5sb2FkaW5nVG9kb3MoKTsiLCJcclxuZnVuY3Rpb24gd2FybmluZ01lc3NhZ2UobmFtZSkge1xyXG4gICAgdmFyIHRvYXN0TGl2ZUV4YW1wbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtuYW1lfS10b2FzdGApXHJcblxyXG4gICAgdmFyIHRvYXN0ID0gbmV3IGJvb3RzdHJhcC5Ub2FzdCh0b2FzdExpdmVFeGFtcGxlKVxyXG4gICAgdG9hc3Quc2hvdygpXHJcbn0iLCJjb25zdCB3ZWF0aGVyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZXRoZXItZm9ybScpO1xyXG5jb25zdCBzZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoJyk7XHJcbmNvbnN0IHdlYXRoZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndldGhlci1pbmZvJyk7XHJcblxyXG5jb25zdCB1cmwgPSAoY2l0eSkgPT4gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtjaXR5fSZhcHBpZD0ke2FwaWtleX1gXHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRXZWF0aGVyQnlMb2NhdGlvbihjaXR5KSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybChjaXR5KSk7XHJcbiAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgYWRkV2VhdGhlcihyZXNwb25zZURhdGEpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYWRkV2VhdGhlcihkYXRhKSB7XHJcbiAgICBjb25zdCB0ZW1wID0gS3RvQyhkYXRhLm1haW4udGVtcCk7XHJcblxyXG4gICAgY29uc3Qgd2VhdGhlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICB3ZWF0aGVyLmNsYXNzTGlzdC5hZGQoJ3dlYXRoZXInKVxyXG5cclxuICAgIHdlYXRoZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgPGgyPiR7dGVtcH3CsEM8L2gyPlxyXG4gICAgPHA+XHJcbiAgICB3aW5kIHNwZWVkIC0gJHtkYXRhLndpbmQuc3BlZWR9bS9zIDxicj5cclxuICAgIGh1bWlkaXR5IC0gJHtkYXRhLm1haW4uaHVtaWRpdHl9JSA8YnI+XHJcbiAgICBwcmVzc3VyZSAtICR7ZGF0YS5tYWluLnByZXNzdXJlICogMC43NX1tbUhnXHJcbiAgICA8L3A+XHJcbiAgICA8aW1nIHNyYz1cImh0dHBzOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93LyR7ZGF0YS53ZWF0aGVyWzBdLmljb259LnBuZ1wiPlxyXG4gICAgYFxyXG5cclxuICAgIHdlYXRoZXJJbmZvLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB3ZWF0aGVySW5mby5zdHlsZS5vcGFjaXR5ID0gJzEnO1xyXG4gICAgYW5pbWF0ZUNTUyh3ZWF0aGVySW5mbywgJ2ZsaXBJblknKVxyXG4gICAgd2VhdGhlckluZm8uYXBwZW5kQ2hpbGQod2VhdGhlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEt0b0MoSykge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoSyAtIDI3My4xNSk7XHJcbn1cclxuXHJcbndlYXRoZXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgY2l0eSA9IHNlYXJjaC52YWx1ZTtcclxuXHJcbiAgICBpZiAoY2l0eSkge1xyXG4gICAgICAgIGdldFdlYXRoZXJCeUxvY2F0aW9uKGNpdHkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB3YXJuaW5nTWVzc2FnZSgnd2VhdGhlcicpO1xyXG4gICAgfVxyXG59KSJdfQ==
